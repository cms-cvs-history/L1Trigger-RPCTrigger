process Demo =  {

include "L1TriggerConfig/L1GtConfigProducers/data/L1GtConfig.cff"
#include "L1TriggerConfig/L1ScalesProducers/data/L1MuTriggerScalesConfig.cff"
#include "L1TriggerConfig/L1ScalesProducers/data/L1MuGMTScalesConfig.cff"
include "L1TriggerConfig/GMTConfigProducers/data/L1MuGMTParametersConfig.cff"
include "L1TriggerConfig/L1ScalesProducers/data/L1MuTriggerScalesConfig.cff"
include "L1TriggerConfig/L1ScalesProducers/data/L1MuTriggerPtScaleConfig.cff"
#include "L1TriggerConfig/L1ScalesProducers/data/L1MuScalesRecords.cff"


untracked PSet maxEvents = { untracked int32 input = -1 } 

 source = NewEventStreamFileReader {
     untracked vstring fileNames = {
                     "file:/cmsnfshome0/nfshome0/fruboes/data/a.dat"
  }

 }

#source = PoolSource 
#{ 
     # replace 'myfile.root' with the source file you want to use
#     untracked vstring fileNames = {"file:/tmp/fruboes/digis_46843_60k.root"} 
#}

#keep the logging output to a nice level
#service = MessageLogger {}
  service = MessageLogger {
     untracked vstring destinations = {  "log.txt" }
#    untracked PSet detailedInfo.txt = {untracked string threshold = "DEBUG"    }
#    untracked vstring debugModules = {  "*" }
  }

  service =  RandomNumberGeneratorService { PSet moduleSeeds = {
            untracked uint32 l1dummy = 1762349
  }}

  include "L1Trigger/HardwareValidation/data/L1DummyProducer.cfi"
  replace l1dummy.VerboseFlag = 0 
  replace l1dummy.DO_SYSTEM       = { 0,0,1,0, 0,1,0,1, 0,0,0,0 }
  #sys list                         {ETP,HTP,RCT,GCT, DTP,DTF,CTP,CTF,  RPC,LTC,GMT,GT};


  include "L1TriggerConfig/RPCTriggerConfig/data/RPCPatSource.cfi"
  replace rpcconf.PACsPerTower = 1
  replace rpcconf.filedir = "L1Trigger/RPCTrigger/data/CosmicPats6/"


  include "L1Trigger/GlobalMuonTrigger/data/gmtDigis.cff"
  include "L1Trigger/GlobalMuonTrigger/data/gmtDigis.cfi"

  replace gmtDigis.DTCandidates = l1dummy:DT
  replace gmtDigis.CSCCandidates = l1dummy:CSC
  replace gmtDigis.MipIsoData = l1dummy


  
  include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"
  include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
  include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
  include "L1TriggerConfig/RPCTriggerConfig/data/RPCPatSource.cfi"
  include "L1Trigger/RPCTrigger/data/rpcTriggerDigis.cfi"
  replace rpcTriggerDigis.label = "rpcunpacker"  
  replace rpcTriggerDigis.buildOwnLinkSystem = true


  include "EventFilter/RPCRawToDigi/data/RPCSQLiteCabling.cfi"

  module rpcunpacker = RPCUnpackingModule{
    untracked InputTag InputLabel = source
  }


module demo = TwoMuonTime { 

  #InputTag GMTsrc =  gtUnpack
  InputTag GMTsrc =  gmtDigis

  int32 towerMar = 21
  int32 phiMar = 4

}


  path p = {rpcunpacker, rpcTriggerDigis, l1dummy, gmtDigis, demo} 

}
